<div class="container mt-5">
  <div class="card p-4 shadow-sm">
    <h2 class="card-title text-center mb-4">Kredi Hesaplama</h2>
    
    <div class="kredi-turu-secim">
      <div class="kredi-kart" [class.selected]="seciliKrediTuru === 'İhtiyaç'" (click)="onKrediTuruDegisti('İhtiyaç')">
        <i class="fas fa-shopping-bag icon"></i>
        <span class="card-text">İhtiyaç Kredisi</span>
      </div>
      <div class="kredi-kart" [class.selected]="seciliKrediTuru === 'Taşıt'" (click)="onKrediTuruDegisti('Taşıt')">
        <i class="fas fa-car icon"></i>
        <span class="card-text">Taşıt Kredisi</span>
      </div>
      <div class="kredi-kart" [class.selected]="seciliKrediTuru === 'Konut'" (click)="onKrediTuruDegisti('Konut')">
        <i class="fas fa-home icon"></i>
        <span class="card-text">Konut Kredisi</span>
      </div>
    </div>

    <div class="slider-wrapper">
      <div class="row g-3">
        <!-- Kredi Tutarı Slider -->
        <div class="col-md-3">
          <label for="krediTutar" class="form-label">Kredi Tutarı (TL): {{ krediTutar | currency:'TRY':'symbol':'1.0-0' }}</label>
          <input type="range" class="form-range custom-slider" id="krediTutar" [(ngModel)]="krediTutar" [min]="minTutar" [max]="maxTutar" step="1000">
        </div>

        <!-- Vade Slider -->
        <div class="col-md-3">
          <label for="vade" class="form-label">Vade (Ay): {{ vade }}</label>
          <input type="range" class="form-range custom-slider" id="vade" [(ngModel)]="vade" [min]="minVade" [max]="maxVade" step="1">
        </div>
      </div>
    </div>
    
    <div class="text-center btn-container">
      <div class="btn-width-two-thirds">
        <button class="btn btn-primary btn-lg" (click)="hesapla()">Hesapla</button>
      </div>
    </div>

    <!-- Hesaplama Sonucu ve Ödeme Planı -->
    <div class="mt-4" *ngIf="gosterSonuc">
      <div class="p-3 bg-light rounded text-center">
        <h4>Hesaplama Sonuçları</h4>
        <p class="h3 fw-bold text-primary">{{ aylikTaksit | number:'1.2-2' }} TL</p>
        <small class="text-muted">Aylık Taksit</small>
        <hr>
        <div class="row">
          <div class="col-md-6">
            <p class="mb-0">Yıllık Faiz Oranı:</p>
            <p class="fw-bold">%{{ (faizOranlari[seciliKrediTuru]) | number:'1.2-2' }}</p>
          </div>
          <div class="col-md-6">
            <p class="mb-0">Toplam Ödeme:</p>
            <p class="fw-bold">{{ toplamOdenecekTutar | number:'1.2-2' }} TL</p>
          </div>
        </div>
        
        <button class="btn btn-outline-secondary mt-3" (click)="getPaymentPlan()">
          {{ showPaymentPlan ? 'Ödeme Planını Gizle' : 'Ödeme Planını Göster' }}
        </button>
      </div>

      <div class="mt-4" *ngIf="showPaymentPlan">
        <h5 class="text-center mb-3">Ödeme Planı Detayı</h5>
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th scope="col">Ay</th>
                <th scope="col">Taksit Tutarı</th>
                <th scope="col">Anapara</th>
                <th scope="col">Faiz</th>
                <th scope="col">Kalan Borç</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let plan of paymentPlan">
                <td>{{ plan.ay }}</td>
                <td>{{ plan.taksitTutari | currency:'TRY':'symbol':'1.2-2' }}</td>
                <td>{{ plan.anapara | currency:'TRY':'symbol':'1.2-2' }}</td>
                <td>{{ plan.faiz | currency:'TRY':'symbol':'1.2-2' }}</td>
                <td>{{ plan.kalanBorc | currency:'TRY':'symbol':'1.2-2' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
